# ğŸ“‹ Ğ ĞĞ¡Ğ¨Ğ˜Ğ Ğ•ĞĞĞĞ• Ğ¢Ğ•Ğ¥ĞĞ˜Ğ§Ğ•Ğ¡ĞšĞĞ• Ğ—ĞĞ”ĞĞĞ˜Ğ•

## Advanced Settings & Analytics Features Ğ´Ğ»Ñ SysMetrics Pro

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 2.0  
**Ğ”Ğ°Ñ‚Ğ°:** December 19, 2025  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Design & Requirements Phase  
**ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚:** High  
**Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ:** High (Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ 6+ Ñ„Ğ¸Ñ‡)

---

## 1. ĞĞ‘Ğ—ĞĞ  Ğ˜ Ğ¦Ğ•Ğ›Ğ¬

### 1.1 ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¦ĞµĞ»ÑŒ

Ğ Ğ°ÑÑˆĞ¸Ñ€Ğ¸Ñ‚ÑŒ SysMetrics Pro Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¾Ğ¹:

1. **Ğ“Ğ¸Ğ±ĞºĞ¸Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°** - Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ñ‹ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ (0.5s - 5s)
2. **Smart Notifications** - Toast Ñ peak Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
3. **Inline Charts** - ĞœĞ¸Ğ½Ğ¸Ğ°Ñ‚ÑÑ€Ğ½Ñ‹Ğµ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ Ğ¿Ğ¾Ğ´ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¾Ğ¹
4. **Data Export** - CSV/TXT Ñ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ
5. **FPS Monitoring** - Real-time FPS Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ (Choreographer API)
6. **Time-Window Averages** - Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ·Ğ° 30s/1m/5m
7. **Granular Feature Toggle** - ĞšĞ°Ğ¶Ğ´ÑƒÑ Ñ„Ğ¸Ñ‡Ñƒ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ/Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ

### 1.2 Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ†ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ

- ğŸ¯ **Ğ‘Ğ¾Ğ»ĞµĞµ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·** - Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ Ñ‚Ñ€ĞµĞ½Ğ´Ñ‹
- ğŸ’¾ **Data Export** - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ»ÑŒÑˆĞµ
- â±ï¸ **FPS Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³** - Ğ²Ñ‹ÑĞ²Ğ»ĞµĞ½Ğ¸Ğµ UI Ğ»Ğ°Ğ³Ğ¾Ğ²
- ğŸ”” **Ğ£Ğ¼Ğ½Ñ‹Ğµ Ğ¾Ğ¿Ğ¾Ğ²ĞµÑ‰ĞµĞ½Ğ¸Ñ** - Ğ½Ğµ Ñ€Ğ°Ğ·Ğ´Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚, Ğ½Ğ¾ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚
- âš™ï¸ **Full Control** - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ’Ğ¡Ğ

---

## 2. Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯

### 2.1 Feature 1: Flexible Update Intervals

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** ĞŸĞ¾Ğ·Ğ²Ğ¾Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñƒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº

**Dropdown Menu Options:**
```
âš¡ Ultra-Fast (500ms) - Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾Ğ¹ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸
ğŸš€ Fast (1s) - ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼ (default)
âš–ï¸ Balanced (2s) - Ğ´Ğ»Ñ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°
ğŸ”‹ Power Save (3s) - ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ğ±Ğ°Ñ‚Ğ°Ñ€ĞµĞ¸
ğŸ’¤ Light (5s) - Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ overhead
```

**Implementation Details:**
- Store Ğ² DataStore Preferences
- Enum Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
- Validate range [500ms, 5000ms]
- Persist Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞºĞµ
- Instant apply (Ğ½Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ)

**UI/UX:**
```
Settings Screen â†’ Performance â†’ Update Interval
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update Interval              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¦¿ 500ms (Ultra-Fast)       â”‚
â”‚ â—‹ 1s (Fast) â† default      â”‚
â”‚ â—‹ 2s (Balanced)            â”‚
â”‚ â—‹ 3s (Power Save)          â”‚
â”‚ â—‹ 5s (Light)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Acceptance Criteria:**
- âœ… Dropdown Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾
- âœ… Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ² DataStore
- âœ… Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ½ĞµĞ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ
- âœ… Ğ’ÑĞµ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ±ĞµĞ· ĞºÑ€Ğ°ÑˆĞµĞ¹
- âœ… CPU overhead ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ñƒ

---

### 2.2 Feature 2: Peak Notifications (Toast)

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Toast Ñ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸ĞµĞ¼ Ğ² Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚ĞºĞ¸

**Toast Content:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š Peak Stats (Last Minute)  â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚
â”‚ ğŸ”¥ CPU Peak: 92% (14:23:45) â”‚
â”‚ ğŸ’¾ RAM Peak: 856MB (14:24:10)â”‚
â”‚ ğŸŒ¡ï¸ Temp Peak: 42Â°C (14:23:50)â”‚
â”‚ ğŸ“¡ Net Peak: 12.5 Mbps â†“     â”‚
â”‚                             â”‚
â”‚ Average: CPU 45% | RAM 520MB â”‚
â”‚         [Dismiss]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Configuration:**
- **Interval Options:**
  - Per minute (default)
  - Per 30 seconds
  - Per 5 minutes
  - Custom interval

- **Enable/Disable per resource:**
  ```
  â˜‘ Show CPU Peak
  â˜‘ Show RAM Peak
  â˜‘ Show Temperature
  â˜‘ Show Network
  â˜ Show FPS
  ```

- **Toast Duration:** 3-10 seconds (configurable)

**Implementation:**
- ScheduledExecutorService Ğ´Ğ»Ñ periodic ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
- Track peak values Ğ² window (30s, 1m, 5m)
- Timezone-aware timestamps
- Swipeable notifications

**Acceptance Criteria:**
- âœ… Toast Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ² Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚
- âœ… Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ values (peak + timestamp)
- âœ… ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»
- âœ… ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€ĞµÑÑƒÑ€Ñ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ toggle'Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
- âœ… ĞĞµ Ñ€Ğ°Ğ·Ğ´Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ¾Ğ¹

---

### 2.3 Feature 3: Inline Charts (Sparklines)

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ğ¸Ğ½Ğ¸Ğ°Ñ‚ÑÑ€Ğ½Ñ‹Ğµ Ğ»Ğ¸Ğ½ĞµĞ¹Ğ½Ñ‹Ğµ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ Ğ¿Ğ¾Ğ´ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¾Ğ¹

**Visual Design:**
```
CPU Usage: 45% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   â•±â”€â•²   â•±â”€â•²   â•±â”€â•²           â”‚
          â”‚  â•±   â•² â•±   â•² â•±   â•²          â”‚
          â”‚â•±       â•²     â•²     â•²        â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          
RAM Usage: 523 MB / 2048 MB (25.5%)
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚             â•±â”€â•²             â”‚
          â”‚            â•±   â•²            â”‚
          â”‚      â”€â”€â”€â”€â”€â•±     â•²â”€â”€         â”‚
          â”‚     â•±            â•²          â”‚
          â”‚â”€â”€â”€â”€â•±              â•²â”€â”€â”€â”€â”€    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Technical Implementation:**
- **Data Structure:** Circular buffer (last 60 data points)
- **Chart Library:** MPAndroidChart (Ğ¸Ğ»Ğ¸ custom Canvas)
- **Render Performance:** 
  - Re-render Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ new data point
  - Caching Ğ´Ğ»Ñ performance
  - Avoid memory leaks

- **Features:**
  - Color gradient (green â†’ yellow â†’ red)
  - Smooth curves (BÃ©zier interpolation)
  - Scrollable history (swipe for older data)
  - Tap to see exact value + timestamp

**Configuration per Resource:**
```
Settings â†’ Charts
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Inline Charts                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ CPU Chart                  â”‚
â”‚ â˜‘ RAM Chart                  â”‚
â”‚ â˜‘ Temperature Chart          â”‚
â”‚ â˜‘ Network Chart              â”‚
â”‚ â˜‘ FPS Chart                  â”‚
â”‚                              â”‚
â”‚ Chart History: Last 60 valuesâ”‚
â”‚ Chart Height: Small / Normal â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Size Guidelines:**
```
Normal View: 40dp height, full width
Compact View: 20dp height (for overlay)
Gesture: Long-press Ğ´Ğ»Ñ full-screen chart
```

**Color Scheme:**
```
CPU:         Blue â†’ Yellow â†’ Red
RAM:         Green â†’ Orange â†’ Red
Temperature: Blue â†’ Yellow â†’ Red
Network:     Cyan â†’ Green â†’ Orange
FPS:         Green (60 fps) â†’ Yellow (45) â†’ Red (30)
```

**Acceptance Criteria:**
- âœ… Charts Ğ¾Ñ‚Ñ€Ğ¸ÑĞ¾Ğ²Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ¿Ğ»Ğ°Ğ²Ğ½Ğ¾
- âœ… ĞĞµÑ‚ jank Ğ¸Ğ»Ğ¸ drops
- âœ… ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ chart Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ toggle'Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ
- âœ… Ğ¦Ğ²ĞµÑ‚Ğ° ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‚ severity
- âœ… Tap Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ exact values
- âœ… No memory leaks
- âœ… <10ms render time per frame

---

### 2.4 Feature 4: Data Export & Sharing

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ² Ñ„Ğ°Ğ¹Ğ» Ğ¸ Ğ¿Ğ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ

**Export Formats:**

**Format 1: CSV (spreadsheet-friendly)**
```csv
timestamp,cpu_percent,ram_mb,ram_percent,temp_celsius,net_ingress_mbps,net_egress_mbps,fps,battery_percent
2025-12-19 14:23:45,45,523,25.5,38,2.5,0.8,59,78
2025-12-19 14:23:46,47,525,25.6,38,2.3,0.7,60,78
2025-12-19 14:23:47,42,521,25.4,37,1.8,0.6,59,77
...
```

**Format 2: TXT (human-readable)**
```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SysMetrics Pro - Performance Report
Generated: 2025-12-19 14:23:45 UTC
Duration: 5 minutes (300 seconds)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SUMMARY STATISTICS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CPU Usage
  Average:  45.2%
  Min:      12.5%
  Max:      92.1%
  Peak Time: 14:23:52

RAM Usage
  Average:  523.4 MB (25.5%)
  Min:      450 MB (22.0%)
  Max:      856 MB (41.8%)
  Peak Time: 14:24:10

Temperature
  Average:  38.5Â°C
  Min:      37.0Â°C
  Max:      42.1Â°C
  Peak Time: 14:23:50

Network Traffic
  Ingress Peak:   12.5 Mbps (14:23:45)
  Egress Peak:    5.2 Mbps (14:24:05)
  Total Down:     2.3 GB
  Total Up:       450 MB

FPS
  Average:  58.2 fps
  Min:      24 fps
  Max:      60 fps
  Drops:    12 (below 30 fps)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DETAILED LOG:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[14:23:45] CPU: 45%, RAM: 523MB, Temp: 38Â°C, Net: â†“2.5Mâ†‘0.8M, FPS: 59
[14:23:46] CPU: 47%, RAM: 525MB, Temp: 38Â°C, Net: â†“2.3Mâ†‘0.7M, FPS: 60
...
```

**Format 3: JSON (Ğ´Ğ»Ñ programmatic analysis)**
```json
{
  "metadata": {
    "generated_at": "2025-12-19T14:23:45Z",
    "duration_seconds": 300,
    "device": "Pixel 6 Pro",
    "android_version": "14",
    "app_version": "1.5.0"
  },
  "summary": {
    "cpu": {
      "average": 45.2,
      "min": 12.5,
      "max": 92.1,
      "peak_at": "2025-12-19T14:23:52Z"
    },
    "ram": {
      "average_mb": 523.4,
      "average_percent": 25.5,
      "min_mb": 450,
      "max_mb": 856,
      "peak_at": "2025-12-19T14:24:10Z"
    }
  },
  "data_points": [
    {
      "timestamp": "2025-12-19T14:23:45Z",
      "cpu_percent": 45,
      "ram_mb": 523,
      "temp_celsius": 38,
      ...
    }
  ]
}
```

**Share Destinations:**
```
Export Data
â”œâ”€ ğŸ“§ Email
â”œâ”€ ğŸ“± SMS / Telegram / WhatsApp
â”œâ”€ â˜ï¸ Google Drive / OneDrive / Dropbox
â”œâ”€ ğŸ“‹ Copy to Clipboard
â”œâ”€ ğŸ’¾ Save to Downloads
â””â”€ ğŸ”— Share Link (if cloud sync enabled)
```

**Implementation:**
```kotlin
// File generation
val exportFile = generateExportFile(
    format = ExportFormat.CSV, // Ğ¸Ğ»Ğ¸ TXT, JSON
    range = TimeRange.LAST_5_MINUTES,
    resources = setOf(Resource.CPU, Resource.RAM, Resource.FPS)
)

// Share
val shareIntent = Intent(Intent.ACTION_SEND).apply {
    type = "text/csv" // Ğ¸Ğ»Ğ¸ text/plain, application/json
    putExtra(Intent.EXTRA_STREAM, exportFile.uri)
    putExtra(Intent.EXTRA_SUBJECT, "SysMetrics Report - 2025-12-19")
}
startActivity(Intent.createChooser(shareIntent, "Share Report"))
```

**Acceptance Criteria:**
- âœ… CSV ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾
- âœ… TXT Ñ‡Ğ¸Ñ‚Ğ°Ğ±ĞµĞ»ĞµĞ½ Ğ¸ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½
- âœ… JSON valid Ğ¸ Ğ¿Ğ°Ñ€ÑĞ¸Ñ€ÑƒĞµÑ‚ÑÑ
- âœ… Sharing Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° Ğ²ÑĞµ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹
- âœ… Ğ¤Ğ°Ğ¹Ğ»Ñ‹ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- âœ… Timestamps UTC Ğ¸ timezone-aware
- âœ… ĞĞµÑ‚ sensitive info Ğ² ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğµ

---

### 2.5 Feature 5: FPS Monitoring (Real-Time)

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ FPS UI-Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸

**Technical Approach: Choreographer API**

```kotlin
class FpsMonitor {
    private val choreographer = Choreographer.getInstance()
    private var frameCount = 0
    private var lastSecondTime = System.nanoTime()
    private val fps = MutableStateFlow(0)
    
    fun startMonitoring() {
        choreographer.postFrameCallback(object : Choreographer.FrameCallback {
            override fun doFrame(frameTimeNanos: Long) {
                frameCount++
                val now = System.nanoTime()
                val elapsedNanos = now - lastSecondTime
                
                if (elapsedNanos >= 1_000_000_000) { // 1 second
                    fps.value = frameCount
                    frameCount = 0
                    lastSecondTime = now
                }
                
                choreographer.postFrameCallback(this)
            }
        })
    }
}
```

**FPS Metrics:**
```
Real-time FPS: 58 fps
â”œâ”€ Status: Good (55-60 fps range)
â”œâ”€ Frame Drops: 0 (below 30 fps)
â”œâ”€ Average: 58.2 fps (last minute)
â”œâ”€ Min: 24 fps
â””â”€ Max: 60 fps

Visual Indicator:
  ğŸŸ¢ Green (55-60 fps): Smooth
  ğŸŸ¡ Yellow (45-54 fps): Acceptable
  ğŸŸ  Orange (30-44 fps): Needs optimization
  ğŸ”´ Red (<30 fps): Lag detected
```

**Advanced Metrics:**
```
Frame Time Analysis:
â”œâ”€ 60 fps frames: 90%
â”œâ”€ 30-59 fps frames: 8%
â”œâ”€ <30 fps frames: 2%
â””â”€ Total drops: 12

Jank Detection:
  Frame took 45ms (should be 16.6ms)
  Skipped frames: 2
  Jank causes: [GC pause, I/O wait, ...]
```

**Configuration:**
```
Settings â†’ Monitoring Metrics â†’ FPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜‘ Show FPS                   â”‚
â”‚ â˜‘ Show Frame Drops           â”‚
â”‚ â˜‘ Show Jank Warning          â”‚
â”‚ â˜‘ Show Jank Details          â”‚
â”‚                              â”‚
â”‚ FPS Threshold: 30 fps â–¼      â”‚
â”‚ (Below this = jank alert)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Acceptance Criteria:**
- âœ… FPS Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑÑ Ğ±ĞµĞ· lag
- âœ… CPU overhead < 0.5%
- âœ… Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ Â±2 fps
- âœ… Frame drops detected correctly
- âœ… Jank warnings Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚
- âœ… No memory leaks in Choreographer callback

**Known Limitations:**
- âš ï¸ ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ UI-thread FPS
- âš ï¸ ĞĞµ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ GPU rendering Ğ´Ğ»Ñ games
- âš ï¸ ĞĞ° Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ñ… devices Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ 120hz refresh rate

---

### 2.6 Feature 6: Time-Window Averages

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑÑ‚ÑŒ Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ ÑÑ€ĞµĞ´Ğ½Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ·Ğ° Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´

**Time Windows:**
```
30 seconds  - Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
1 minute    - standard window (default)
5 minutes   - Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ĞµĞµ Ğ³Ğ»Ğ°Ğ´ĞºĞ¾Ğ³Ğ¾ Ñ‚Ñ€ĞµĞ½Ğ´Ğ°
Custom      - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ·Ğ°Ğ´Ğ°ĞµÑ‚ ÑĞ°Ğ¼
```

**Display Location:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CPU Usage: 45% (now)                    â”‚ â† Current
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ Current: 45%  â”‚ Avg 30s: 42%        â”‚ â† Averages
â”‚ â”‚ Avg 1m: 43.2% â”‚ Avg 5m: 41.8%       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Or in a separate "Stats" tab:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STATISTICS (Last Minute)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CPU                                     â”‚
â”‚  Current:  45%                          â”‚
â”‚  Average:  43.2%                        â”‚
â”‚  Min:      12.5%                        â”‚
â”‚  Max:      92.1%                        â”‚
â”‚  P95:      78.4%                        â”‚
â”‚  P99:      88.7%                        â”‚
â”‚                                         â”‚
â”‚ RAM                                     â”‚
â”‚  Current:  523 MB (25.5%)               â”‚
â”‚  Average:  520 MB (25.4%)               â”‚
â”‚  ...                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Implementation:**
```kotlin
class TimeWindowAverageCalculator {
    private val dataPoints = LinkedList<DataPoint>()
    private val maxDuration = 5 * 60 * 1000L // 5 minutes
    
    fun addDataPoint(value: Double, timestamp: Long) {
        dataPoints.add(DataPoint(value, timestamp))
        // Remove old points
        dataPoints.removeIf { it.timestamp < timestamp - maxDuration }
    }
    
    fun getAverage(windowMs: Long): Double {
        val now = System.currentTimeMillis()
        val cutoff = now - windowMs
        return dataPoints
            .filter { it.timestamp >= cutoff }
            .map { it.value }
            .average()
    }
    
    fun getPercentile(percentile: Int, windowMs: Long): Double {
        val now = System.currentTimeMillis()
        val cutoff = now - windowMs
        val values = dataPoints
            .filter { it.timestamp >= cutoff }
            .map { it.value }
            .sorted()
        
        val index = (values.size * percentile / 100.0).toInt()
        return if (index < values.size) values[index] else values.lastOrNull() ?: 0.0
    }
}
```

**Configuration:**
```
Settings â†’ Analytics â†’ Time Windows
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Time Windows                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ Show 30s Average              â”‚
â”‚ â˜‘ Show 1m Average (default)     â”‚
â”‚ â˜‘ Show 5m Average               â”‚
â”‚ â˜‘ Show Percentiles (P95, P99)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Acceptance Criteria:**
- âœ… Averages Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑÑÑ‚ÑÑ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾
- âœ… Percentiles accurate
- âœ… Old data properly removed
- âœ… Memory efficient (circular buffer)
- âœ… No lag in calculations
- âœ… Timezone-aware timestamps

---

### 2.7 Feature 7: Comprehensive Settings UI

**Requirements:**
- Ğ’ÑĞµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼ĞµÑÑ‚Ğµ
- Ğ›Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°
- Instant preview
- Persist Ğ²ÑĞµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ

**Settings Structure:**
```
ğŸ“Š SysMetrics Settings
â”‚
â”œâ”€ âš™ï¸ MONITORING
â”‚  â”œâ”€ Update Interval [500ms - 5s]
â”‚  â”œâ”€ Background Monitoring (toggle)
â”‚  â””â”€ Deep Sleep Mode (toggle)
â”‚
â”œâ”€ ğŸ”” NOTIFICATIONS
â”‚  â”œâ”€ Peak Notifications Interval [30s/1m/5m]
â”‚  â”œâ”€ Show CPU Peak (toggle)
â”‚  â”œâ”€ Show RAM Peak (toggle)
â”‚  â”œâ”€ Show Temperature (toggle)
â”‚  â”œâ”€ Show Network Peak (toggle)
â”‚  â”œâ”€ Show FPS Peak (toggle)
â”‚  â””â”€ Toast Duration [3s - 10s]
â”‚
â”œâ”€ ğŸ“ˆ CHARTS
â”‚  â”œâ”€ Show Inline Charts (toggle)
â”‚  â”œâ”€ Show CPU Chart (toggle)
â”‚  â”œâ”€ Show RAM Chart (toggle)
â”‚  â”œâ”€ Show Temperature Chart (toggle)
â”‚  â”œâ”€ Show Network Chart (toggle)
â”‚  â”œâ”€ Show FPS Chart (toggle)
â”‚  â””â”€ Chart Height [Small/Normal/Large]
â”‚
â”œâ”€ ğŸ“Š ANALYTICS
â”‚  â”œâ”€ Time Windows
â”‚  â”‚  â”œâ”€ Show 30s Average (toggle)
â”‚  â”‚  â”œâ”€ Show 1m Average (toggle)
â”‚  â”‚  â”œâ”€ Show 5m Average (toggle)
â”‚  â”‚  â””â”€ Show Percentiles (toggle)
â”‚  â”œâ”€ FPS Monitoring (toggle)
â”‚  â””â”€ Jank Detection (toggle)
â”‚
â”œâ”€ ğŸ’¾ DATA
â”‚  â”œâ”€ Export Format [CSV/TXT/JSON]
â”‚  â”œâ”€ Export Last [1m / 5m / 30m / All]
â”‚  â”œâ”€ Export Data Button
â”‚  â”œâ”€ Auto-Delete Old Data (toggle)
â”‚  â””â”€ Data Retention [7d / 30d / Never]
â”‚
â”œâ”€ ğŸ¨ DISPLAY
â”‚  â”œâ”€ Theme [Light/Dark/System]
â”‚  â”œâ”€ Color Scheme [Default/High Contrast]
â”‚  â””â”€ Font Size [Small/Normal/Large]
â”‚
â””â”€ â„¹ï¸ ABOUT
   â”œâ”€ Version
   â”œâ”€ Changelog
   â””â”€ Send Feedback
```

---

## 3. ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ

### 3.1 Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Settings Screen                 â”‚
â”‚   (SettingsFragment)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ User changes settings
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    SettingsViewModel                    â”‚
â”‚   (validates & prepares)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PreferencesRepository                â”‚
â”‚   (saves to DataStore)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Monitoring Service                   â”‚
â”‚   (reads settings & applies)            â”‚
â”‚   - Adjusts update interval             â”‚
â”‚   - Enables/disables features           â”‚
â”‚   - Configures exporters                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Data Collection Layer                â”‚
â”‚   - Choreographer (for FPS)             â”‚
â”‚   - SystemMetrics (for CPU/RAM/Temp)    â”‚
â”‚   - NetworkMonitor (for traffic)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Analytics & Processing               â”‚
â”‚   - TimeWindowAverageCalculator         â”‚
â”‚   - ChartDataBuffer                     â”‚
â”‚   - PeakNotificationManager             â”‚
â”‚   - DataExporter                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    UI Updates                           â”‚
â”‚   - Overlay (updated metrics)           â”‚
â”‚   - Charts (new data points)            â”‚
â”‚   - Stats Panel (averages)              â”‚
â”‚   - Notifications (toasts/alerts)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 New Entities & Models

```kotlin
// Settings
data class MonitoringSettings(
    val updateIntervalMs: Long,        // 500-5000
    val showCpuChart: Boolean,
    val showRamChart: Boolean,
    val showTempChart: Boolean,
    val showNetworkChart: Boolean,
    val showFpsChart: Boolean,
    val chartHeight: ChartHeight,      // SMALL, NORMAL, LARGE
    
    val peakNotificationInterval: Long, // 30s, 1m, 5m
    val showCpuPeak: Boolean,
    val showRamPeak: Boolean,
    val showTempPeak: Boolean,
    val showNetPeak: Boolean,
    val showFpsPeak: Boolean,
    val toastDurationMs: Int,
    
    val show30sAverage: Boolean,
    val show1mAverage: Boolean,
    val show5mAverage: Boolean,
    val showPercentiles: Boolean,
    
    val showFpsMonitoring: Boolean,
    val showJankDetection: Boolean,
    val fpsThreshold: Int              // 30 fps default
)

// Analytics
data class TimeWindowStats(
    val current: Float,
    val avg30s: Float,
    val avg1m: Float,
    val avg5m: Float,
    val min: Float,
    val max: Float,
    val p95: Float,
    val p99: Float
)

data class ChartDataPoint(
    val timestamp: Long,
    val value: Float,
    val severity: Severity             // LOW, MEDIUM, HIGH
)

// Export
enum class ExportFormat {
    CSV, TXT, JSON
}

data class ExportConfig(
    val format: ExportFormat,
    val timeRange: TimeRange,
    val resources: Set<Resource>
)

enum class TimeRange {
    LAST_1_MINUTE, LAST_5_MINUTES, LAST_30_MINUTES, LAST_1_HOUR, ALL
}
```

---

## 4. IMPLEMENTATION PHASES

### PHASE 1: Settings Infrastructure (2-3 Ğ´Ğ½Ñ)
- âœ… SettingsScreen UI
- âœ… DataStore integration
- âœ… PreferencesRepository
- âœ… All settings models

### PHASE 2: Monitoring Configuration (1-2 Ğ´Ğ½Ñ)
- âœ… Update interval control
- âœ… Feature toggles
- âœ… Instant apply without restart

### PHASE 3: Peak Notifications (2-3 Ğ´Ğ½Ñ)
- âœ… Toast implementation
- âœ… Peak tracking
- âœ… Scheduled notifications
- âœ… Per-resource toggle

### PHASE 4: Inline Charts (3-4 Ğ´Ğ½Ñ)
- âœ… Chart library integration
- âœ… Data buffer management
- âœ… Smooth rendering
- âœ… Per-chart toggle

### PHASE 5: FPS Monitoring (2-3 Ğ´Ğ½Ñ)
- âœ… Choreographer API integration
- âœ… Frame counting logic
- âœ… Jank detection
- âœ… Performance optimization

### PHASE 6: Time-Window Analytics (2-3 Ğ´Ğ½Ñ)
- âœ… Data accumulation
- âœ… Average calculations
- âœ… Percentile computation
- âœ… Memory management

### PHASE 7: Data Export & Sharing (2-3 Ğ´Ğ½Ñ)
- âœ… CSV exporter
- âœ… TXT exporter
- âœ… JSON exporter
- âœ… Share intent integration

### PHASE 8: Testing & Optimization (2-3 Ğ´Ğ½Ñ)
- âœ… Unit tests
- âœ… Integration tests
- âœ… Performance benchmarks
- âœ… Memory profiling

**TOTAL: 16-23 Ğ´Ğ½Ñ (~100-150 Ñ‡Ğ°ÑĞ¾Ğ²)**

---

## 5. PERFORMANCE TARGETS

| Metric | Target | Current |
|--------|--------|---------|
| Settings Load | <100ms | - |
| Chart Render | <16ms (60fps) | - |
| FPS Calculation | <1ms | - |
| Export Generation | <500ms | - |
| Memory Overhead | <50MB | - |
| CPU Overhead | <2% additional | - |

---

## 6. KEY IMPLEMENTATION DETAILS

### 6.1 Data Persistence

```kotlin
// DataStore for settings
dataStore.edit { preferences ->
    preferences[UPDATE_INTERVAL_KEY] = 1000L
    preferences[SHOW_CPU_CHART_KEY] = true
    preferences[PEAK_NOTIFICATION_INTERVAL_KEY] = 60_000L
}

// Room database for historical data
@Entity(tableName = "metrics_data")
data class MetricsDataEntity(
    @PrimaryKey(autoGenerate = true) val id: Int = 0,
    val timestamp: Long,
    val cpuPercent: Float,
    val ramMb: Long,
    val tempCelsius: Float,
    val fpsValue: Int,
    // ... other metrics
)
```

### 6.2 Chart Rendering

```kotlin
// MPAndroidChart Ğ¸Ğ»Ğ¸ custom Canvas
class MetricsChartView(context: Context) : View(context) {
    private val dataBuffer = CircularBuffer<ChartDataPoint>(60)
    
    override fun onDraw(canvas: Canvas) {
        if (dataBuffer.isEmpty()) return
        
        val path = Path()
        dataBuffer.forEachIndexed { index, point ->
            val x = (index * width / 60f)
            val y = (1 - point.value / 100f) * height
            
            if (index == 0) path.moveTo(x, y)
            else path.lineTo(x, y)
        }
        
        canvas.drawPath(path, paint)
    }
    
    fun addDataPoint(point: ChartDataPoint) {
        dataBuffer.add(point)
        invalidate()
    }
}
```

### 6.3 Toast Notifications

```kotlin
fun showPeakNotification(stats: PeakStats) {
    val text = buildString {
        append("Peak Stats (Last Minute)\n")
        append("CPU: ${stats.cpuPeak}% @ ${stats.cpuPeakTime}\n")
        append("RAM: ${stats.ramPeak}MB @ ${stats.ramPeakTime}\n")
        append("Avg: CPU ${stats.cpuAvg}% | RAM ${stats.ramAvg}MB")
    }
    
    Toast.makeText(context, text, Toast.LENGTH_LONG).show()
}
```

### 6.4 FPS Monitoring

```kotlin
class FpsMonitor(mainLooper: Looper) {
    private val choreographer = Choreographer.getInstance()
    private var frameCount = 0
    private var lastSecondTime = System.nanoTime()
    private val fpsFlow = MutableStateFlow(0)
    
    fun start() {
        choreographer.postFrameCallback(frameCallback)
    }
    
    private val frameCallback = object : Choreographer.FrameCallback {
        override fun doFrame(frameTimeNanos: Long) {
            frameCount++
            val now = System.nanoTime()
            val elapsedNs = now - lastSecondTime
            
            if (elapsedNs >= 1_000_000_000L) {
                fpsFlow.value = frameCount
                frameCount = 0
                lastSecondTime = now
            }
            
            choreographer.postFrameCallback(this)
        }
    }
}
```

---

## 7. TESTING STRATEGY

### Unit Tests
- Settings validation
- Average calculations
- Percentile computation
- Export format generation

### Integration Tests
- Settings persistence
- Chart updates
- Toast notifications
- Data export flow

### Performance Tests
- Chart rendering fps
- Memory usage
- CPU overhead
- Export time

---

## 8. SUCCESS CRITERIA

âœ… All settings persist correctly  
âœ… Update intervals work as expected  
âœ… Notifications appear on schedule  
âœ… Charts render smoothly  
âœ… FPS monitoring accurate (Â±2fps)  
âœ… Exports generate valid files  
âœ… Sharing works on all platforms  
âœ… <50MB additional memory  
âœ… <2% additional CPU  
âœ… >80% test coverage  

---

## REFERENCES

- [Android DataStore Documentation](https://developer.android.com/topic/libraries/architecture/datastore)
- [Choreographer API](https://developer.android.com/reference/android/view/Choreographer)
- [Frame Rate Basics](https://developer.android.com/guide/topics/graphics/frame-rate)
- [Android Performance Best Practices](https://developer.android.com/develop/performance)
- [MPAndroidChart Library](https://github.com/PhilJay/MPAndroidChart)

---

**Ready for Claude Opus 4.5 Implementation**

