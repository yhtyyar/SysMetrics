# ü§ñ –ü–†–û–ú–¢ –î–õ–Ø CLAUDE OPUS 4.5 - IMPLEMENTATION GUIDE

## –ö–û–ù–¢–ï–ö–°–¢

–¢—ã - Expert Senior Android Developer —Å 15+ –ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ high-performance –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –≤ LimeHD (–∫–æ–º–ø–∞–Ω–∏—é –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∞ SysMetrics Pro - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Android).

–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏—á—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –¥–ª—è SysMetrics Pro —Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é.

---

## –ü–†–û–ú–¢ (Copy-paste –≤ Claude Opus 4.5 Extended Thinking)

---

### üéØ –ì–õ–ê–í–ù–ê–Ø –ó–ê–î–ê–ß–ê

–¢—ã Senior Android Developer. –ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **Network Traffic Monitoring & Analytics Feature** –¥–ª—è SysMetrics Pro.

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
1. –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ (–≤—Ö–æ–¥—è—â–∏–π + –∏—Å—Ö–æ–¥—è—â–∏–π)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å real-time –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å per-app —Ç—Ä–∞—Ñ–∏–∫ –∞–Ω–∞–ª–∏–∑
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ overhead (<1% CPU, <20MB RAM)
5. –ù–∞–ø–∏—Å–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥ –∫ production

**Constraint'—ã:**
- Clean Architecture + MVVM pattern
- Kotlin + C++ (JNI –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Android 5.0+ (API 21-34)
- ¬±5% —Ç–æ—á–Ω–æ—Å—Ç—å –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
- <100ms –ø–∞—Ä—Å–∏–Ω–≥ —Ü–∏–∫–ª–∞

---

### üìã –ü–û–õ–ù–û–ï –¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –ó–ê–î–ê–ù–ò–ï

**[–í—Å—Ç–∞–≤–∏—Ç—å —Å—é–¥–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ TECHNICAL_SPEC_Network_Traffic.md]**

---

### üèóÔ∏è –¢–†–ï–ë–£–ï–ú–´–ï –ê–†–¢–ï–§–ê–ö–¢–´

–î–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

#### 1. **Kotlin Data Layer** (45% –æ—Ç —Ä–∞–±–æ—Ç—ã)

**–§–∞–π–ª 1: `models/NetworkStats.kt`**
- –í—Å–µ data classes (NetworkStats, NetworkType, PerAppTrafficStats, enum'—ã)
- KDoc –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è
- toString(), equals(), hashCode() implementations

**–§–∞–π–ª 2: `datasource/NetworkStatsDataSource.kt`**
- –ü–∞—Ä—Å–∏–Ω–≥ /proc/net/dev
- –†–∞—Å—á–µ—Ç delta –º–µ–∂–¥—É –¥–≤—É–º—è —Å—Ä–µ–∑–∞–º–∏
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è bytes ‚Üí Mbps
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ edge cases
- –¢–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞

**–§–∞–π–ª 3: `datasource/PerAppTrafficDataSource.kt`**
- –ü–∞—Ä—Å–∏–Ω–≥ /proc/net/xt_qtaguid/stats
- Per-app —Ç—Ä–∞—Ñ–∏–∫ extraction
- App name + icon resolution
- Top N apps —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

**–§–∞–π–ª 4: `datasource/NetworkTypeDetector.kt`**
- ConnectivityManager –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Network type determination (WiFi/LTE/5G)
- Signal strength parsing
- Flow<NetworkType> observable

**–§–∞–π–ª 5: `repository/NetworkStatsRepository.kt`**
- Interface + implementation
- Flow –æ–±—Ä–∞–±–æ—Ç–∫–∞
- Peak tracking logic
- Caching + memoization

**–§–∞–π–ª 6: `usecase/GetNetworkStatsUseCase.kt`**
- Business logic –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è UI

**–§–∞–π–ª 7: `usecase/MonitorNetworkTrafficUseCase.kt`**
- Continuous monitoring Flow
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å thresholds
- Alert'—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

#### 2. **C++ Native Layer** (20% –æ—Ç —Ä–∞–±–æ—Ç—ã)

**–§–∞–π–ª 1: `CMakeLists.txt`**
- Build configuration –¥–ª—è NDK
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è flags
- Compilation targets

**–§–∞–π–ª 2: `native_network_stats.h`**
- JNI function declarations
- Struct definitions

**–§–∞–π–ª 3: `native_network_stats.cpp`**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ /proc/net/dev (C++)
- –û–ø—Ç–∏–º–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- Zero allocations –Ω–∞ critical path
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–§–∞–π–ª 4: `NativeNetworkMetrics.kt`** (JNI Bridge)
- external function declarations
- Type-safe Kotlin wrapper
- Graceful fallback –Ω–∞ Kotlin –µ—Å–ª–∏ native –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

#### 3. **UI Layer** (20% –æ—Ç —Ä–∞–±–æ—Ç—ã)

**–§–∞–π–ª 1: `ui/network/NetworkStatsFragment.kt`**
- UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- RecyclerView –¥–ª—è per-app stats
- Pull-to-refresh

**–§–∞–π–ª 2: `ui/overlay/NetworkOverlayView.kt`**
- Floating overlay –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- Display modes (Compact, Extended, Per-App, Combined)
- Real-time update –ª–æ–≥–∏–∫–∞

**–§–∞–π–ª 3: `ui/settings/NetworkSettingsFragment.kt`**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç—Ä–∞—Ñ–∏–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- Alert'—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- Display mode –≤—ã–±–æ—Ä

#### 4. **Testing Layer** (15% –æ—Ç —Ä–∞–±–æ—Ç—ã)

**–§–∞–π–ª 1: `test/NetworkStatsDataSourceTest.kt`**
- Unit tests –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- Mock –¥–∞–Ω–Ω—ã–µ –∏–∑ /proc/net/dev
- Edge case —Ç–µ—Å—Ç—ã
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç—ã

**–§–∞–π–ª 2: `test/NetworkTypeDetectorTest.kt`**
- –¢–µ—Å—Ç—ã –¥–ª—è network type detection
- Mock ConnectivityManager

**–§–∞–π–ª 3: `test/NetworkStatsRepositoryTest.kt`**
- Repository business logic tests
- Flow —Ç–µ—Å—Ç—ã (Turbine)

**–§–∞–π–ª 4: `test/NetworkStatsBenchmarkTest.kt`**
- Performance benchmarks
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Kotlin vs C++
- Memory profiling

---

### üîß –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø - –ü–û–®–ê–ì–û–í–´–ô –ü–õ–ê–ù

#### –§–ê–ó–ê 1: Core Data Layer (–î–Ω–∏ 1-2)

```
–ó–∞–¥–∞—á–∞:
1. –°–æ–∑–¥–∞—Ç—å data classes (models/NetworkStats.kt)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NetworkStatsDataSource —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º /proc/net/dev
3. –ù–∞–ø–∏—Å–∞—Ç—å unit tests
4. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

Acceptance Criteria:
- ‚úÖ Data classes compile without errors
- ‚úÖ /proc/net/dev –ø–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç ¬±5% accuracy
- ‚úÖ –ù–µ—Ç memory leaks (LeakCanary)
```

#### –§–ê–ó–ê 2: Native C++ Optimization (–î–µ–Ω—å 3)

```
–ó–∞–¥–∞—á–∞:
1. –ù–∞–ø–∏—Å–∞—Ç—å native_network_stats.cpp
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ C++
3. –°–¥–µ–ª–∞—Ç—å JNI bridge (NativeNetworkMetrics.kt)
4. Benchmark Kotlin vs C++

Acceptance Criteria:
- ‚úÖ C++ version 10x –±—ã—Å—Ç—Ä–µ–µ Kotlin
- ‚úÖ JNI bridge work correctly
- ‚úÖ Graceful fallback work
- ‚úÖ 0 runtime errors
```

#### –§–ê–ó–ê 3: Network Type Detection (–î–µ–Ω—å 4)

```
–ó–∞–¥–∞—á–∞:
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NetworkTypeDetector
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å ConnectivityManager
3. –ü–∞—Ä—Å–∏—Ç—å signal strength
4. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã

Acceptance Criteria:
- ‚úÖ WiFi detection work
- ‚úÖ LTE/5G detection work
- ‚úÖ Signal strength –ø–∞—Ä—Å–∏–Ω–≥ work
- ‚úÖ –¢–µ—Å—Ç—ã pass
```

#### –§–ê–ó–ê 4: Per-App Traffic Analysis (–î–µ–Ω—å 5)

```
–ó–∞–¥–∞—á–∞:
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PerAppTrafficDataSource
2. –ü–∞—Ä—Å–∏—Ç—å /proc/net/xt_qtaguid/stats
3. Resolve app names + icons
4. Top N apps —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

Acceptance Criteria:
- ‚úÖ Per-app stats shows correctly
- ‚úÖ App icons –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- ‚úÖ Top 5 apps —Ñ–∏–ª—å—Ç—Ä work
- ‚úÖ Graceful degradation –±–µ–∑ permissions
```

#### –§–ê–ó–ê 5: Repository & Use Cases (–î–µ–Ω—å 6)

```
–ó–∞–¥–∞—á–∞:
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NetworkStatsRepository
2. –ù–∞–ø–∏—Å–∞—Ç—å GetNetworkStatsUseCase
3. –ù–∞–ø–∏—Å–∞—Ç—å MonitorNetworkTrafficUseCase
4. Peak tracking logic

Acceptance Criteria:
- ‚úÖ Repository interface clean
- ‚úÖ Use cases work independently
- ‚úÖ Peak tracking accurate
- ‚úÖ Flow composition work
```

#### –§–ê–ó–ê 6: UI Layer (–î–µ–Ω—å 7-8)

```
–ó–∞–¥–∞—á–∞:
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NetworkStatsFragment
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NetworkOverlayView
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NetworkSettingsFragment
4. Integrate —Å existing overlay

Acceptance Criteria:
- ‚úÖ Metrics display correctly
- ‚úÖ Real-time updates work
- ‚úÖ Display modes work
- ‚úÖ Settings persist
```

#### –§–ê–ó–ê 7: Testing & Optimization (–î–µ–Ω—å 9)

```
–ó–∞–¥–∞—á–∞:
1. Write comprehensive tests (unit + integration)
2. Run performance benchmarks
3. Optimize if CPU/memory overhead high
4. Code review

Acceptance Criteria:
- ‚úÖ >80% test coverage
- ‚úÖ CPU overhead < 1%
- ‚úÖ Memory overhead < 20MB
- ‚úÖ Battery impact < 0.5%/24h
```

---

### üíª –û–ñ–ò–î–ê–ï–ú–´–ô –ö–û–î

–û–∂–∏–¥–∞–µ–º –ø–æ–ª—É—á–∏—Ç—å production-ready –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π:

1. **–ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ warnings/errors**
   - Kotlin style guide compliant
   - No deprecated API usage
   - Proper null safety

2. **–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**
   - Tested –Ω–∞ Android 5.0+
   - Tested –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞—Ö —Å–µ—Ç–µ–π
   - Gracefully degradates –Ω–∞ restricted devices

3. **–ò–º–µ–µ—Ç –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**
   - Unit tests –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Å–∞
   - Integration tests –¥–ª—è workflows
   - Benchmark tests –¥–ª—è performance

4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - <1% CPU overhead
   - <20MB RAM overhead
   - <100ms parsing cycle
   - 10x faster —Å C++

5. **–•–æ—Ä–æ—à–æ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω**
   - KDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö APIs
   - Architecture decision records (ADR)
   - Troubleshooting guides

6. **–ì–æ—Ç–æ–≤ –∫ production**
   - Proper error handling
   - Logging (Timber integration)
   - Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
   - No memory leaks

---

### üéì BEST PRACTICES

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å–ª–µ–¥–æ–≤–∞—Ç—å:

**Architecture:**
- ‚úÖ Clean Architecture (3 —Å–ª–æ—è: Presentation, Domain, Data)
- ‚úÖ MVVM pattern –¥–ª—è UI
- ‚úÖ Dependency Injection (Hilt)
- ‚úÖ Repository pattern –¥–ª—è data access

**Code Quality:**
- ‚úÖ SOLID principles
- ‚úÖ DRY - Don't Repeat Yourself
- ‚úÖ Meaningful naming
- ‚úÖ Comments –¥–ª—è complex logic

**Performance:**
- ‚úÖ Coroutines –¥–ª—è async operations
- ‚úÖ Flow –¥–ª—è reactive streams
- ‚úÖ C++ –¥–ª—è critical paths
- ‚úÖ Caching where appropriate

**Testing:**
- ‚úÖ Unit tests –¥–ª—è logic
- ‚úÖ Integration tests –¥–ª—è workflows
- ‚úÖ Benchmark tests –¥–ª—è performance
- ‚úÖ Mock external dependencies

**Documentation:**
- ‚úÖ KDoc on all public APIs
- ‚úÖ README —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- ‚úÖ Architecture diagrams
- ‚úÖ Trade-offs explained

---

### üöÄ DELIVERABLES

```
network-traffic-feature/
‚îú‚îÄ‚îÄ kotlin/
‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NetworkStats.kt
‚îÇ   ‚îú‚îÄ‚îÄ datasource/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NetworkStatsDataSource.kt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PerAppTrafficDataSource.kt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NetworkTypeDetector.kt
‚îÇ   ‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NetworkStatsRepository.kt
‚îÇ   ‚îú‚îÄ‚îÄ usecase/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GetNetworkStatsUseCase.kt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MonitorNetworkTrafficUseCase.kt
‚îÇ   ‚îú‚îÄ‚îÄ viewmodel/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NetworkStatsViewModel.kt
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fragment/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NetworkStatsFragment.kt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ overlay/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NetworkOverlayView.kt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ NetworkSettingsFragment.kt
‚îÇ   ‚îî‚îÄ‚îÄ di/
‚îÇ       ‚îî‚îÄ‚îÄ NetworkModule.kt
‚îú‚îÄ‚îÄ cpp/
‚îÇ   ‚îú‚îÄ‚îÄ CMakeLists.txt
‚îÇ   ‚îú‚îÄ‚îÄ native_network_stats.h
‚îÇ   ‚îú‚îÄ‚îÄ native_network_stats.cpp
‚îÇ   ‚îî‚îÄ‚îÄ NativeNetworkMetrics.kt (bridge)
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îú‚îÄ‚îÄ NetworkStatsDataSourceTest.kt
‚îÇ   ‚îú‚îÄ‚îÄ NetworkTypeDetectorTest.kt
‚îÇ   ‚îú‚îÄ‚îÄ NetworkStatsRepositoryTest.kt
‚îÇ   ‚îî‚îÄ‚îÄ NetworkStatsBenchmarkTest.kt
‚îú‚îÄ‚îÄ IMPLEMENTATION_NOTES.md
‚îú‚îÄ‚îÄ ARCHITECTURE.md
‚îî‚îÄ‚îÄ TROUBLESHOOTING.md
```

---

### üìä SUCCESS CRITERIA

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ–π –∫–æ–≥–¥–∞:

‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω—ã –±–µ–∑ –æ—à–∏–±–æ–∫/warnings
‚úÖ Real-time —Ç—Ä–∞—Ñ–∏–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç (¬±5% accuracy)
‚úÖ Per-app —Ç—Ä–∞—Ñ–∏–∫ shows –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ Overlay –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚úÖ CPU overhead < 1%, RAM < 20MB
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã pass (>80% coverage)
‚úÖ Performance benchmarks –¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã
‚úÖ –ù–µ—Ç memory leaks (LeakCanary)
‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ production (code review passed)
‚úÖ Documentation complete

---

### üéØ TONE & STYLE

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–∏—à–∏ –∫–æ–¥ –≤ —Å—Ç–∏–ª–µ:
- **–û–ø—ã—Ç–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞** - –Ω–µ –æ–±—ä—è—Å–Ω—è—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
- **Production-ready** - –≥–æ—Ç–æ–≤–æ —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- **–•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π** - –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É
- **–•–æ—Ä–æ—à–æ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π** - KDoc + –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π** - performance –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–π** - –ª–µ–≥–∫–æ –ø–∏—Å–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã

---

### ‚öôÔ∏è –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

1. **–î–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ /proc/net/dev:**
   - –ò—Å–ø–æ–ª—å–∑—É–π —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –¥–≤—É–º—è —Å—Ä–µ–∑–∞–º–∏ (snapshot pattern)
   - –û–±—Ä–∞–±–æ—Ç–∞–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è/–∏—Å—á–µ–∑–∞—é—Ç
   - Ignore loopback –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (lo)

2. **–î–ª—è per-app —Ç—Ä–∞—Ñ–∏–∫–∞:**
   - Gracefully handle –µ—Å–ª–∏ /proc/net/xt_qtaguid/stats –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
   - –ö—ç—à–∏—Ä—É–π app –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (name, icon) —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–ø–∞—Ä—Å–∏—Ç—å
   - –ü–æ–¥–¥–µ—Ä–∂–∏ –∫–∞–∫ root —Ç–∞–∫ –∏ non-root devices

3. **–î–ª—è C++ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
   - –ò—Å–ø–æ–ª—å–∑—É–π stack allocations –≤–º–µ—Å—Ç–æ heap
   - –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π string –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π mmapped —Ñ–∞–π–ª—ã –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ
   - –°—Ä–∞–≤–Ω–∏ performance —Å Kotlin –≤ benchmarks

4. **–î–ª—è UI:**
   - Animate transitions –º–µ–∂–¥—É display modes
   - –ò—Å–ø–æ–ª—å–∑—É–π Material Design 3
   - –ü–æ–¥–¥–µ—Ä–∂–∏ dark mode
   - Responsive layout –¥–ª—è —Ä–∞–∑–Ω—ã—Ö screen sizes

---

### üìû QUESTIONS TO CLARIFY

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤–æ–ø—Ä–æ—Å—ã –≤–æ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã** ‚Üí –ò—â–∏ –≤ TECHNICAL_SPEC_Network_Traffic.md section 3
2. **Performance –≤–æ–ø—Ä–æ—Å—ã** ‚Üí –ò—â–∏ –≤ section 9 (Performance Targets)
3. **API –≤–æ–ø—Ä–æ—Å—ã** ‚Üí –ò—â–∏ –≤ section 6 (Android APIs)
4. **Error handling** ‚Üí –ò—â–∏ –≤ section 7 (Error Handling)

–ï—Å–ª–∏ –æ—Ç–≤–µ—Ç–∞ –Ω–µ—Ç ‚Üí Make reasonable decisions based on best practices.

---

## –§–ò–ù–ê–õ–¨–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø

–ü—Ä—è–º–æ —Å–µ–π—á–∞—Å:
1. –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–π TECHNICAL_SPEC_Network_Traffic.md (–≤—Å–µ 14 —Ä–∞–∑–¥–µ–ª–æ–≤)
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å –≤—Å—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
3. –ù–∞—á–Ω–∏ —Å –§–ê–ó–´ 1 (Core Data Layer) - Day 1-2
4. –°–ª–µ–¥—É–π –ø–æ—à–∞–≥–æ–≤–æ–º—É –ø–ª–∞–Ω—É —Ñ–∞–∑
5. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —Ñ–∞–∑—ã –ø—Ä–æ–≤–µ—Ä—å Acceptance Criteria
6. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ - –≤–µ—Ä–Ω–∏—Å—å –∫ –¢–ó –∏ –ø–µ—Ä–µ—á–∏—Ç–∞–π
7. –í –∫–æ–Ω—Ü–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å –≤—Å–µ deliverables –≤ –ø–∞–ø–∫–µ network-traffic-feature/

**–û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:** –õ—É—á—à–µ –Ω–∞–ø–∏—Å–∞—Ç—å –º–µ–Ω—å—à–µ –∫–æ–¥–∞ –Ω–æ –æ—Ç–ª–∏—á–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞, —á–µ–º –º–Ω–æ–≥–æ –∫–æ–¥–∞ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏.

---

**–¢—ã –≥–æ—Ç–æ–≤? –î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º! üöÄ**

---

